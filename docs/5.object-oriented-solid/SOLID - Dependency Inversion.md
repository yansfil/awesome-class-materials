# SOLID - Dependency Inversion

## κ°λ…

`Dependency Inversion Principle(μμ΅΄μ„± μ—­μ „ μ›μΉ™)`μ€ μμ΅΄μ„±μ„ ν•­μƒ κ³ μμ¤€μΌλ΅ ν–¥ν•κ² ν•μ—¬ μμΈ΅ν•  μ μ—†λ” μμ΅΄μ„±μ λ³€ν™”λ¥Ό μ¤„μ΄μλ” μ›μΉ™μ…λ‹λ‹¤. 

μΌλ°μ μΌλ΅ μμ΅΄μ„±μ„ κ°€μ§€λ” λ€μƒμ΄ λ³€κ²½λλ©΄ μμ΅΄ν•λ” μ£Όμ²΄λ„ ν•¨κ» λ³€κ²½λ©λ‹λ‹¤. λ§μ•½ μμ£Ό λ°”λ€λ” κµ¬ν„μ²΄(μ €μμ¤€)λ¥Ό μμ΅΄ν•κ² λλ‹¤λ©΄ μ½”λ“μ λ³€κ²½μ΄ μ¦μ„ κ²ƒμ΄λ©°, λ²„κ·Έμ™€ μ‚¬μ΄λ“ μ΄ν™νΈκ°€ λ‚  ν™•λ¥ μ΄ λ†’μ•„μ§‘λ‹λ‹¤. μ΄λ• μ½”λ“κ°€ λ λ°”λ€λ” μΈν„°νμ΄μ¤λ‚ μ¶”μƒ ν΄λμ¤(κ³ μμ¤€)λ¥Ό μμ΅΄ν•λ‹¤λ©΄ μƒλ€μ μΌλ΅ μ•μ •μ μΈ μ½”λ“λ¥Ό μ‘μ„±ν•  μ μμµλ‹λ‹¤. 

:::tip

κ³ μμ¤€μ€ μƒμ„ μμ¤€ + μ¶”μƒν™”λμ–΄ μλ” κ°λ…μ…λ‹λ‹¤. μΌλ°μ μΌλ΅ μ λ³€ν•μ§€ μ•λ” νΉμ„±μ„ κ°€μ§‘λ‹λ‹¤. μ½”λ“ κ°λ…μ—μ„ κ³ μμ¤€μ€ μΈν„°νμ΄μ¤, μ¶”μƒν΄λμ¤ λ“±μ„ μλ΅ λ“¤ μ μμµλ‹λ‹¤. 

μ €μμ¤€μ€ μ¶”μƒν™”λ κ°λ…μ„ κµ¬μ²΄μ μΌλ΅ κµ¬ν„ν•λ” κ°λ…μ…λ‹λ‹¤. μΈν„°νμ΄μ¤, μ¶”μƒν΄λμ¤λ¥Ό κµ¬ν„ν•λ” κµ¬ν„μ²΄(ν΄λμ¤)λ‚ ν•¨μ λ“± μ‹¤μ  λ™μ‘μ— κ΄€μ—¬ν•λ” μ½”λ“λΌκ³  λ³΄μ‹λ©΄ λ©λ‹λ‹¤.  

:::
<br/>

κΈ°λ³Έ μ½”λ“ 
```python
import abc

class Database:
    @abc.abstractmethod
    def connect(uri: str):
        ...
    
    @abc.abstractmethod
    def store_data(data: any):
        ...

class InMemoryDatabase(Database):
    def __init__(self):
        self.data = None
    
    def connect(uri: str):
        pass    
    
    def store_data(self, data):
        print("inmemoryμ— μ €μ¥ν•©λ‹λ‹¤")

class Mysqldatabase(Database):
    def connect(uri: str):
        print(f"{uri}μ— μ—°κ²°ν•©λ‹λ‹¤")
    
    def store_data(self, data):
        print("mysqlμ— μ €μ¥ν•©λ‹λ‹¤")

```

## AS-IS
```python
class App():
    def __init__(self):
        self.inmemory_db = InMemoryDatabase() #κµ¬ν„μ²΄μ— μμ΅΄ν•κ³  μμµλ‹λ‹¤.
    
    def save_user(self, data):
        self.inmemory_db.store_data(data)

if __name__ == "__main__":
    app = App()
    app.save_user({"id":1,"name":"grab"})
```

λ§μ•½ Appμ—μ„ λ‹¤λ¥Έ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ‚¬μ©ν•κ³  μ‹¶λ‹¤λ©΄, μ½”λ“λ¥Ό μ§μ ‘ λ³€κ²½ν•΄μ•Ό ν•©λ‹λ‹¤. λν• Appμ„ ν…μ¤νΈν•λ” μ½”λ“λ¥Ό μ‘μ„±ν•  λ•λ„ μμ΅΄μ„±μ΄ κ°•ν•κ² κ²°ν•©λμ–΄ ν…μ¤νΈκ°€ μ‰½μ§€ μ•μµλ‹λ‹¤.  

## TO-BE

### 1. μμ΅΄μ„± μ—­μ „

```python
class App():
    def __init__(self):
        # κ³ μμ¤€μ„ μμ΅΄ν•μ§€λ§ κµ¬ν„μ²΄λ¥Ό κµ¬ν„ν•λ” μ½”λ“κ°€ ν•¨κ» λ“¤μ–΄μμ–΄ λ°μ½μ§λ¦¬ μμ΅΄μ„± μ—­μ „μ…λ‹λ‹¤. 
        self.inmemory_db : Database = InMemoryDatabase() 
    
    def save_user(self, data):
        self.inmemory_db.store_data(data)

if __name__ == "__main__":
    app = App()
    app.save_user({"id":1,"name":"grab"})
```

### 2. μμ΅΄μ„± μ£Όμ…κ³Ό ν•¨κ»

μΌλ°μ μΌλ΅ μμ΅΄μ„± μ—­μ „μ„ ν•λ©΄μ„ μμ΅΄μ„± μ£Όμ…μ„ ν•¨κ» μ‚¬μ©ν•©λ‹λ‹¤. 

μμ΅΄μ„± μ£Όμ…μ„ μ‚¬μ©ν•κ² λλ©΄ κ°μ²΄μ μƒμ„±μ„ μ™Έλ¶€μ— λ§΅κΈ°κ² λ©λ‹λ‹¤. κ·Έλ¬λ©΄ ν•΄λ‹Ή ν΄λμ¤λ” μ™Έλ¶€ μμ΅΄μ„±μ— μ΅°κΈ λ” μμ λ΅­κ² λλ©° ν…μ¤νΈλ¥Ό μ‘μ„±ν•  λ•λ„ μ©μ΄ν•©λ‹λ‹¤. 

```python
class App():
    def __init__(self, database: Database): #κ³ μμ¤€μ— μμ΅΄ν•©λ‹λ‹¤. 
        self.database = database
    
    def save_user(self, data):
        self.database.store_data(data)

if __name__ == "__main__":
    inmemory_db = InMemoryDatabase()
    app = App(inmemory_db)  # μ™Έλ¶€μ—μ„ μμ΅΄μ„±μ„ μƒμ„± ν›„ μ£Όμ…ν•΄ μ¤λ‹λ‹¤. 
    app.save_user({"id":1,"name":"grab"})
```

:::tip
μμ΅΄μ„± μ£Όμ…(DI)μ„ ν•΄μ£ΌκΈ° μ„ν•΄μ„  κ²°κµ­ μ΄λ¥Ό μ‚¬μ©ν•λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μμ΅΄μ„±λ“¤μ„ μΌμΌμ΄ λ„£μ–΄μ¤μ•Ό ν•©λ‹λ‹¤. λ§μ•½ μλ» μ½”λ“λ¥Ό μ‘μ„±ν•λ©΄ μμ΅΄μ„± κ΄€κ³„κ°€ λ³µμ΅ν•΄μ§ μ μμµλ‹λ‹¤.

κ·Έλμ„ λ³΄ν†µ μμ΅΄μ„± μ£Όμ…μ„ λ³„λ„λ΅ κ΄€λ¦¬ν•΄μ£Όλ” λΌμ΄λΈλ¬λ¦¬λ‚ ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
:::

:::tip
μμ΅΄μ„± μ£Όμ…(DI), μμ΅΄μ„± μ—­μ „ μ›μΉ™(DIP), μ μ–΄μ μ—­μ „(IoC)μ κ°λ…λ“¤μ„ μ•κ³  μμΌλ©΄ μΆ‹μ„ κ²ƒ κ°™μµλ‹λ‹¤.  
π‘‰π»[κ°λ…μ΄ μ μ •λ¦¬λ λ§ν¬](https://vagabond95.me/posts/about-ioc-dip-di/)   
:::