# 프로그래밍 패러다임 흐름 훑고가기 - 함수지향

## 함수형 프로그래밍

### 개념

`함수형(Functional) 프로그래밍`은 상태를 갖지 않는 함수들의 연속으로 프로그래밍을 하는 패러다임입니다. 

`상태`를 갖지 않는다는 의미는, 같은 입력을 넣었을 때 언제나 같은 출력을 내보낸다는 것입니다. 즉 함수의 입/출력에 영향을 주는 외부 요인이 없습니다.

함수형 프로그래밍 코드에서는 한 번 초기화한 변수는 변하지 않습니다. 이런 특성을 `불변성`이라고 하는데, 이 불변성을 통해 안정성을 얻을 수 있습니다.

### 예시

함수형 프로그래밍에서는 함수가 상태를 갖지 않는다는 것이 중요합니다. 예를 들면 다음은 함수형 프로그래밍 관점이 아닙니다.

```python
c = 1

def func(a: int, b: int) -> int:
    return a + b + c  # c 라는 외부 값, 상태가 포함되어 있기에 함수형이 아닙니다.
```

반면 다음은 함수형이라 볼 수 있습니다.

```python
def func(a: int, b: int, c: int) -> int:
    return a + b + c  # 주어진 파라미터만 사용합니다. 별도의 상태가 없습니다.
```

수학에서 `f(x) = y` 라는 함수 `f` 가 있을 때, `f`에 `x` 를 입력으로 주면 항상 `y` 라는 출력을 얻습니다. 이처럼 함수형 프로그래밍은 같은 입력을 주었을 때 항상 같은 값을 출력하도록 상태를 갖지 않는 것입니다.

그렇다면 왜 상태를 가지지 않으려고 할까요? 일반적으로 상태를 가지면 예측하지 못한 결과를 가질 수 있기 때문입니다.

예를 들어 다음과 같이 상태를 가지는 Calculator 클래스가 있습니다.

```python
class Calculator:
    def __init__(self, alpha: int) -> None:
        self.alpha = alpha
        self.beta = 0

    def run() -> int
    	return self.alpha + self.beta
```

위 코드에서 `run()` 메서드 실행 시 매번 같은 값이 나오리라는 보장은 없습니다.  예를 들면 다음처럼 말이죠.

```python
calculator = Calculator(alpha=3)
calculator.run()  # 3 반환
calculator.beta = 1
calculator.run()  # 4 반환
```

이렇게 매번 상태를 가지면, 같은 함수를 실행하더라도 실제로 내가 의도하는 결과가 나오는지 완전히 단언하기 어렵습니다. 위 코드처럼 상태는 어디서든 바뀔 가능성이 있기 때문이죠. 보통 이런 현상을 `사이트 이펙트`라고 합니다. 객체지향 언어들도 이런 상태가 존재함으로써 생기는 문제를 알고 있어 접근 제어자(private, protected)와 같은 기능들을 제공하지만, 완벽한 해법은 아닙니다.

함수형 프로그래밍 방식으로 코드를 작성하면 다음과 같은 모양을 가지게 됩니다. 함수형 프로그래밍의 중심인 함수는 입력과 출력이 될 수도 있기에, 합수를 결합하고 조합하기 쉬워져 간결한 코드 작성이 가능합니다. 
는
```python
def main():
    return read_input_file("input_file.txt").parse_input_data().save_data()
```


프로그래밍 언어 중에서는 대표적으로 '스칼라(Scala)'가 이런 함수형 프로그래밍을 따르는 언어이며 다른 프로그래밍 언어에서도 특정 API를 사용하면 함수형 프로그래밍이 가능합니다.



### 장단점

함수형 프로그래밍은 상태로 인한 사이드 이펙트가 없기 때문에 안정적입니다. 따라서 동시성을 가지는 프로그램에 사용하기 적합합니다. 특히 대용량 데이터를 병렬적으로 처리할 때 이렇게 사이드 이펙트가 없도록 로직을 설계하는 것은 매우 중요한데, 최근 데이터 처리기술의 발전으로 함수형 프로그래밍이 부상되었습니다.

하지만 실제로 함수형 프로그래밍을 제대로 작성하기 어렵습니다. 사실 절차지향부터 객체지향이 대중적이고, 사람들에게는 "상태"는 아주 보편화된 개념입니다. 그런데 이 개념을 없애고 생각하며 코드를 작성하는 것은 생각보다 어렵습니다.

<br>

## 정리

- 프로그래밍 패러다임이란 프로그래밍을 어떤 기준으로 바라보고 작성할 것인지에 대한 관점입니다.
- 절차지향 프로그래밍은 순차적인 함수 호출을 중심의 관점입니다.
    - 주로 구조가 TOP-DOWN 입니다. 따라서 이해하기 쉽습니다.
    - 하지만 코드를 확장하거나 자주 실행에 따라 로직이 바뀌어야 하는 경우에 수정하기 어렵습니다.
-  객체지향 프로그래밍은 객체들의 책임과 협력을 중심의 관점입니다.
    - 다형성과 의존성 주입으로 코드를 확장하기 쉬우며, 실행환경의 다양한 입력에 대응하기 좋습니다.
    - 하지만 런타임이 되기 전에 실제로 코드가 어떤 방향으로 흐르는지 알기 어려우며, 디버깅도 어렵습니다.
- 함수형 프로그래밍은 상태를 갖지 않는 함수들의 활용 중심의 관점입니다.
    - 상태를 가지지 않기 때문에 예측에서 벗어나는 결과(사이드 이펙트)가 없습니다.
    - 하지만 실제로 상태를 가지지 않는 함수를 작성하고 활용하는 코드를 작성하는 것은 어렵습니다.

<br>

## 더 읽어보면 좋은 것들

- [[우아한테크세미나] 우아한객체지향 by 조영호님](https://www.youtube.com/watch?v=dJ5C4qRqAgA&ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech)
    - 명저 "오브젝트" 책을 쓰신 조영호님의 객체지향 내용에 대한 유튜브 영상입니다. 
- [ruaa님 블로그 - 왜 함수형 프로그래밍이 좋을까?](http://ruaa.me/why-functional-matters/)
    - 함수형 프로그래밍이 왜 좋은지 좀 더 자세하게 설명한 글입니다.
